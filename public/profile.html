<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ForgeTomorrow - User Profile</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <style>
    /* Your CSS styles here */
    * {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom, #1a1a1a, #000);
      color: #f5f5f5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    main {
      max-width: 800px;
      margin: 3rem auto 4rem;
      padding: 0 1.5rem;
      flex-grow: 1;
    }
    h1, h2 {
      color: #ff9900;
      margin-bottom: 1rem;
    }
    h1 {
      text-align: center;
      font-size: 2.5rem;
    }
    section {
      margin-bottom: 2.5rem;
      background: #222;
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(255, 69, 0, 0.3);
    }
    .profile-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 2rem;
      position: relative;
    }
    .avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background-color: #ff4500;
      color: #000;
      font-weight: bold;
      font-size: 3rem;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
      margin-bottom: 1rem;
      box-shadow: 0 0 8px #ff4500;
    }
    .name, .headline, .location {
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .name {
      font-weight: bold;
      font-size: 2rem;
      color: #ff9900;
    }
    .headline {
      font-style: italic;
      font-size: 1.1rem;
      color: #ccc;
    }
    .location {
      color: #aaa;
      font-size: 0.9rem;
    }
    .section-title {
      font-size: 1.6rem;
      font-weight: bold;
      margin-bottom: 1rem;
      border-bottom: 2px solid #ff4500;
      padding-bottom: 0.3rem;
    }
    p.summary-text, ul.list {
      font-size: 1.05rem;
      line-height: 1.5;
      color: #ddd;
    }
    ul.list {
      list-style: none;
      padding-left: 1rem;
    }
    ul.list li {
      margin-bottom: 0.75rem;
      position: relative;
      padding-left: 1.2em;
    }
    ul.list li::before {
      content: "•";
      color: #ff4500;
      position: absolute;
      left: 0;
    }
    .portfolio-item {
      background: #333;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 0 5px rgba(255, 69, 0, 0.4);
    }
    .portfolio-item h3 {
      color: #ff9900;
      margin-bottom: 0.3rem;
    }
    .portfolio-item p {
      color: #ccc;
      font-size: 0.95rem;
    }
    button#edit-toggle {
      position: absolute;
      top: 0;
      right: 0;
      background: #ff4500;
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0 0 0 10px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
    }
    button#edit-toggle:hover {
      background: #e03d00;
    }
    .hidden {
      display: none;
    }
    input[type="text"],
    textarea {
      width: 100%;
      padding: 0.5rem;
      border-radius: 5px;
      border: 1px solid #555;
      background-color: #222;
      color: #f5f5f5;
      font-size: 1rem;
      resize: vertical;
      margin-bottom: 1rem;
    }
    textarea {
      min-height: 100px;
    }
    .save-cancel-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
    }
    button.save-btn,
    button.cancel-btn {
      padding: 0.5rem 1.5rem;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s;
    }
    button.save-btn {
      background: #28a745;
      color: white;
    }
    button.save-btn:hover {
      background: #218838;
    }
    button.cancel-btn {
      background: #dc3545;
      color: white;
    }
    button.cancel-btn:hover {
      background: #c82333;
    }
    @media (max-width: 480px) {
      main {
        margin: 2rem 1rem 3rem;
        padding: 0 1rem;
      }
    }
  </style>
</head>
<body>

  <!-- Header placeholder -->
  <div id="header-placeholder"></div>

  <main>
    <section class="profile-header" aria-label="User Basic Information">
      <div class="avatar" aria-hidden="true" id="avatar">ER</div>
      <button id="edit-toggle" aria-pressed="false" aria-label="Toggle Edit Mode">Edit Profile</button>
      <div>
        <h1 class="name" id="name-display">Eric James</h1>
        <input type="text" id="name-input" class="hidden" aria-label="Edit name" />
      </div>
      <div>
        <p class="headline" id="headline-display">Customer Success Leader | Problem Solver | AI & Networking Enthusiast</p>
        <input type="text" id="headline-input" class="hidden" aria-label="Edit headline" />
      </div>
      <div>
        <p class="location" id="location-display">Nashville, TN, USA</p>
        <input type="text" id="location-input" class="hidden" aria-label="Edit location" />
      </div>
    </section>

    <section aria-labelledby="summary-title">
      <h2 id="summary-title" class="section-title">About Me</h2>
      <p class="summary-text" id="summary-display">
        Experienced leader with 20+ years in customer success, technical support, and team management. Passionate about building authentic professional relationships and leveraging AI to empower job seekers.
      </p>
      <textarea id="summary-input" class="hidden" aria-label="Edit About Me"></textarea>
    </section>

    <section aria-labelledby="experience-title">
      <h2 id="experience-title" class="section-title">Experience</h2>
      <ul class="list" id="experience-display">
        <li><strong>Customer Success Director</strong> — ForgeTomorrow Inc. (2023–Present)</li>
        <li><strong>Technical Support Lead</strong> — Tech Solutions Ltd. (2018–2023)</li>
        <li><strong>IT Operations Manager</strong> — Enterprise Corp. (2012–2018)</li>
      </ul>
      <textarea id="experience-input" class="hidden" aria-label="Edit Experience"></textarea>
    </section>

    <section aria-labelledby="portfolio-title">
      <h2 id="portfolio-title" class="section-title">Portfolio</h2>
      <div id="portfolio-display">
        <div class="portfolio-item">
          <h3>AI-Powered Job Matching Platform</h3>
          <p>Designed and led the development of a job matching AI system that increased successful job placements by 30% within the first year.</p>
        </div>
        <div class="portfolio-item">
          <h3>Customer Support Team Revamp</h3>
          <p>Implemented new training and tools that improved customer satisfaction scores by 25%.</p>
        </div>
      </div>
      <textarea id="portfolio-input" class="hidden" aria-label="Edit Portfolio"></textarea>
    </section>

    <section aria-labelledby="skills-title">
      <h2 id="skills-title" class="section-title">Skills & Endorsements</h2>
      <ul class="list" id="skills-display">
        <li>Leadership & Team Management</li>
        <li>Customer Success Strategy</li>
        <li>AI & Data-Driven Decision Making</li>
        <li>Technical Support & Operations</li>
      </ul>
      <textarea id="skills-input" class="hidden" aria-label="Edit Skills"></textarea>
    </section>

    <div class="save-cancel-buttons hidden" id="edit-buttons">
      <button class="save-btn" id="save-btn">Save</button>
      <button class="cancel-btn" id="cancel-btn">Cancel</button>
    </div>
  </main>

  <!-- Footer placeholder -->
  <div id="footer-placeholder"></div>

  <script>
    fetch('header.html')
      .then(res => res.text())
      .then(html => document.getElementById('header-placeholder').innerHTML = html)
      .catch(err => console.error('Error loading header:', err));

    fetch('footer.html')
      .then(res => res.text())
      .then(html => document.getElementById('footer-placeholder').innerHTML = html)
      .catch(err => console.error('Error loading footer:', err));

    const editToggle = document.getElementById('edit-toggle');
    const saveBtn = document.getElementById('save-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const editButtons = document.getElementById('edit-buttons');

    // Elements to toggle between display and edit
    const fields = [
      {
        display: document.getElementById('name-display'),
        input: document.getElementById('name-input')
      },
      {
        display: document.getElementById('headline-display'),
        input: document.getElementById('headline-input')
      },
      {
        display: document.getElementById('location-display'),
        input: document.getElementById('location-input')
      },
      {
        display: document.getElementById('summary-display'),
        input: document.getElementById('summary-input')
      },
      {
        display: document.getElementById('experience-display'),
        input: document.getElementById('experience-input')
      },
      {
        display: document.getElementById('portfolio-display'),
        input: document.getElementById('portfolio-input')
      },
      {
        display: document.getElementById('skills-display'),
        input: document.getElementById('skills-input')
      }
    ];

    // Store original content to revert on cancel
    let originalContent = {};

    function enableEditMode() {
      editToggle.setAttribute('aria-pressed', 'true');
      editToggle.textContent = 'Cancel Edit';
      editButtons.classList.remove('hidden');

      fields.forEach(({ display, input }) => {
        input.value = getTextContent(display);
        display.classList.add('hidden');
        input.classList.remove('hidden');
      });
    }

    function disableEditMode() {
      editToggle.setAttribute('aria-pressed', 'false');
      editToggle.textContent = 'Edit Profile';
      editButtons.classList.add('hidden');

      fields.forEach(({ display, input }) => {
        display.classList.remove('hidden');
        input.classList.add('hidden');
      });
    }

    function getTextContent(element) {
      if (element.tagName.toLowerCase() === 'ul') {
        // Join li texts with newlines
        return Array.from(element.querySelectorAll('li')).map(li => li.textContent.trim()).join('\n');
      } else if (element.id === 'portfolio-display') {
        // Join portfolio items with double newlines
        return Array.from(element.querySelectorAll('.portfolio-item')).map(div => {
          const title = div.querySelector('h3')?.textContent.trim() || '';
          const desc = div.querySelector('p')?.textContent.trim() || '';
          return `${title}\n${desc}`;
        }).join('\n\n');
      } else {
        return element.textContent.trim();
      }
    }

    function setTextContent(element, text) {
      if (element.tagName.toLowerCase() === 'ul') {
        const lines = text.split('\n').filter(line => line.trim() !== '');
        element.innerHTML = lines.map(line => `<li>${line.trim()}</li>`).join('');
      } else if (element.id === 'portfolio-display') {
        // Expect double newline separated items with title and description lines
        const items = text.split('\n\n').filter(item => item.trim() !== '');
        element.innerHTML = items.map(item => {
          const [title, ...descLines] = item.split('\n');
          const desc = descLines.join(' ');
          return `<div class="portfolio-item"><h3>${title.trim()}</h3><p>${desc.trim()}</p></div>`;
        }).join('');
      } else {
        element.textContent = text;
      }
    }

    editToggle.addEventListener('click', () => {
      if (editToggle.getAttribute('aria-pressed') === 'true') {
        // Cancel edit mode and revert changes
        fields.forEach(({ display }, i) => {
          setTextContent(display, originalContent[i]);
        });
        disableEditMode();
      } else {
        // Enter edit mode and save original content
        originalContent = {};
        fields.forEach(({ display }, i) => {
          originalContent[i] = getTextContent(display);
        });
        enableEditMode();
      }
    });

    saveBtn.addEventListener('click', () => {
      // Save changes from inputs to displays
      fields.forEach(({ display, input }) => {
        setTextContent(display, input.value);
      });
      disableEditMode();
      alert('Profile updated! (Note: Save functionality is currently local only.)');
    });

    cancelBtn.addEventListener('click', () => {
      // Revert changes and exit edit mode
      fields.forEach(({ display }, i) => {
        setTextContent(display, originalContent[i]);
      });
      disableEditMode();
    });
  </script>

</body>
</html>
